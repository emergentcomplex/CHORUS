# Filename: infrastructure/postgres/pg_hba.conf
# This is the complete and correct Host-Based Authentication file.

# TYPE  DATABASE        USER            ADDRESS                 METHOD

# Allow all local connections without a password. This is required for the
# container's internal initialization scripts to run successfully.
local   all             all                                     trust

# THE DEFINITIVE FIX: Add an explicit rule for the application user to connect
# to ANY database from the Docker network. This is required for Debezium's
# initial schema-reading connection.
host    all             trident_user    0.0.0.0/0               md5

# Add an explicit rule for the application user to make a REPLICATION connection.
# This is required for Debezium's change data streaming.
host    replication     trident_user    0.0.0.0/0               md5